{
  "hash": "f093e587d21ca1c2f288f06f51c291f8",
  "result": {
    "markdown": "---\ntitle: \"Engaging and Beautiful Data Visualizations with ggplot2\"\nsubtitle: \"<span style='font-size:2em;'>The Layered Grammar of Graphics</span>\"\nauthor: \"<a href='https://www.cedricscherer.com' style='color:#28a87d;font-weight:600;'>Cédric Scherer</a>&ensp;//&ensp;posit::conf&ensp;//&ensp;September 2023\"\nformat:\n  revealjs:\n    theme: css/style.scss\n    footer: '[Cédric Scherer](https://cedricscherer.com) // posit::conf(2023) // DataViz with ggplot2'\n    transition: fade\n    progress: true\n    multiplex: false\n    preview-links: true\n    scrollable: false\n    hide-inactive-cursor: true\n    highlight-style: printing\n    chalkboard:\n      theme: whiteboard\n      boardmarker-width: 4\n      buttons: true\n    pause: true\neditor: source\nknitr:\n  opts_chunk:\n    dev: \"ragg_png\"\n    retina: 3\n    dpi: 200\nexecute:\n  freeze: auto\n  cache: true\n  echo: true\n  fig-width: 10.1\n  fig-height: 6.3\n  fig-align: center\n---\n\n\n\n\n##\n\n::: footer\n[{ggplot2} package description](https://ggplot2.tidyverse.org/)\n:::\n\n![](img/intro/ggplot2.png){fig-align=\"center\" fig-alt=\"The ggplot2 hex logo.\"}\n\n<br>\n\n<b style='font-size:30pt;'><code>{ggplot2}</code> is a system for declaratively creating graphics,<br>based on \"The Grammar of Graphics\" (Wilkinson 2005).</b>\n\n::: fragment\n[You provide the data, tell <code>{ggplot2}</code> how to]{style=\"font-size:24pt;\"} [map variables to aesthetics,]{.circle-highlight}<br>what graphical primitives to use, and it takes care of the details.\n:::\n\n## Advantages of {ggplot2}\n\n::: incremental\n-   consistent underlying \"grammar of graphics\" (Wilkinson 2005)\\\n-   very flexible, layered plot specification\\\n-   theme system for polishing plot appearance\\\n-   lots of additional functionality thanks to extensions\\\n-   active and helpful community\n:::\n\n\n## The Components of a ggplot\n\n<br>\n<table style='width:100%;font-size:16pt;'>\n  <tr>\n    <th>Component</th>\n    <th>Function</th>\n    <th>Explanation</th>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Data</b></td>\n    <td><code>ggplot(data)</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>\n    <td>*The raw data that you want to visualize.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Aesthetics&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></td>\n    <td><code>aes()</code></td>\n    <td>*The mapping between variables and visual properties*</td>\n  <tr>\n    <td><b style='color:#67676;'>Geometries</b></td>\n    <td><code>geom_*()</code></td>\n    <td>*The geometric shapes representing the data.*</td>\n  </tr>\n</table>\n\n--------------------------------------------------------------------------------\n\n![ggplot2 examples featured on [ggplot2.tidyverse.org](https://ggplot2.tidyverse.org/)](img/fundamentals/basic-ggplots.png){fig-align=\"center\" fig-alt=\"A collection of the versatility of ggplot2 to create basic graphs. All of them use only data, aesthetics, and layers with the defaults of ggplot2.\"}\n\n\n## The Components of a ggplot\n\n\n<br>\n<table style='width:100%;font-size:16pt;'>\n  <tr>\n    <th>Component</th>\n    <th>Function</th>\n    <th>Explanation</th>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Data</b></td>\n    <td><code>ggplot(data)</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>\n    <td>*The raw data that you want to visualize.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Aesthetics&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></td>\n    <td><code>aes()</code></td>\n    <td>*The mapping between variables and visual properties.*</td>\n  <tr>\n    <td><b style='color:#67676;'>Geometries</b></td>\n    <td><code>geom_*()</code></td>\n    <td>*The geometric shapes representing the data.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Statistics</b></td>\n    <td><code>stat_*()</code></td>\n    <td>*The statistical transformations applied to the data.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Scales</b></td>\n    <td><code>scale_*()</code></td>\n    <td>*The representation of mapped aesthetic attributes.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Coordinate System</b></td>\n    <td><code>coord_*()</code></td>\n    <td>*The transformation to map data coordinates into the plot plane.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Facets</b></td>\n    <td><code>facet_*()</code></td>\n    <td>*The arrangement of the data into a grid of small multiples.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Visual Themes</b></td>\n    <td><code>theme() | theme_*()</code></td>\n    <td>*The overall visual defaults of non-data elements of the graphic.*</td>\n  </tr>\n</table>\n\n--------------------------------------------------------------------------------\n\n![Illustration by [Allison Horst](https://github.com/allisonhorst/stats-illustrations)](img/fundamentals/ah-ggplot2-exploratory.png){fig-align=\"center\" fig-alt=\"Allison Horsts monster illustration of explorative plotting with ggplot2.\"}\n\n--------------------------------------------------------------------------------\n\n![Illustration by [Allison Horst](https://github.com/allisonhorst/stats-illustrations)](img/fundamentals/ah-ggplot2-masterpiece.png){fig-align=\"center\" fig-alt=\"Allison Horsts monster illustration of building  data masterpiece ith ggplot2 featuring a little Picasso monster :)\"}\n\n\n# The {ggplot2} Showcase\n\n--------------------------------------------------------------------------------\n\n<br>\n\n![Collection of Graphics from the [BBC R Cookbook](https://bbc.github.io/rcookbook/)](img/showcase/bbc-gallery.png){fig-align=\"center\" fig-alt=\"A multi-plot panel of various data visualizations created by the BBC teams.\"}\n\n--------------------------------------------------------------------------------\n\n<br>\n\n![Collection of Graphics from the [BBC R Cookbook](https://bbc.github.io/rcookbook/)](img/showcase/bbc-gallery-quote.png){fig-align=\"center\" fig-alt=\"A multi-plot panel of various data visualizations created by the BBC teams.\"}\n\n--------------------------------------------------------------------------------\n\n![[\"Bill Dimensions of Brush-Tailed Penguins\"](https://github.com/Z3tt/TidyTuesday/tree/main/plots/2020_31)](img/showcase/palmer-penguins.png){fig-align=\"center\" fig-size=\"80%\" fig-alt=\"Distribution of coffee bean ratings by the Coffee Quality Institute for countries with 25 or more reviews (up to 2018). Distributions are shown as dot plots and multiple interval stripes.\"}\n\n--------------------------------------------------------------------------------\n\n![[\"Netflix Content Explosion\"](https://twitter.com/tanya_shapiro/status/1610419176333627393) by Tanya Shapiro](img/showcase/netflix-originals-tanya-shapiro.jpeg){fig-align=\"center\" fig-size=\"50%\" fig-alt=\"rea graph of number of Netflix original series over time, annotated with images and labels.\"}\n\n--------------------------------------------------------------------------------\n\n![My reinterpreted [The Economist graphic](https://www.economist.com/graphic-detail/2019/09/28/why-are-some-languages-spoken-faster-than-others)](img/showcase/speech-speed.png){fig-align=\"center\" fig-alt=\"The raincloud chart showing the distributions of normalized speech rates (dark pink) and information rates (dark lime green) across language families.\"}\n\n--------------------------------------------------------------------------------\n\n![[\"Not My Cup of Coffee\"](https://www.behance.net/gallery/100638417/Not-My-Cup-of-Coffee)](img/showcase/coffee-ratings.png){fig-align=\"center\" fig-alt=\"The raincloud chart showing the distributions of normalized speech rates (dark pink) and information rates (dark lime green) across language families.\"}\n\n--------------------------------------------------------------------------------\n\n![[\"Food Carbon Footprint Index 2018\"](https://github.com/Z3tt/TidyTuesday/tree/main/plots/2020_08)](img/showcase/20200307_TT_2020_08_CarbonFoodprint_alt.png){fig-align=\"center\" fig-alt=\"Two circular hierarchical bar plots showing the carbon footprint 2018 for food consumption and CO2 per continent and country.\"}\n\n--------------------------------------------------------------------------------\n\n![[\"Popular Programming Languages in CRAN Packages\"](https://twitter.com/spren9er/status/1195826547724374018) by Torsten Sprenger](img/showcase/cran-packages-torsten-sprenger.png){fig-align=\"center\" fig-alt=\"A circular tree showing the programing languages used in CRAN packages, with nodes being grouped by languages and package names, sized by number of lines.\"}\n\n--------------------------------------------------------------------------------\n\n![[\"Appearance of X-Men Characters\"](https://www.behance.net/gallery/100640345/Appearance-of-Popular-X-Men-Characters](img/showcase/xmen-comics.png){fig-align=\"center\" fig-size=\"50%\" fig-alt=\"Streamgraphs showing the appearance of the most common X-Men characters (Wovlerine, Magneto, Nightcrawler, Storm & Gambit) during the so-called \"Claremont Run\". Chris Claremont is a famous American comic book writer who was in charge of the \"Uncanny X-Men\" comic book series from 1975–1991. During that time he developed complex literary themes and strong female characters into superhero comics, and turning the X-Men into one of Marvel's most popular series.\"}\n\n--------------------------------------------------------------------------------\n\n![[\"Artists in the US\"](https://twitter.com/leeolney3/status/1574656040599265280) by Lee Olney](img/showcase/artists-usa-lee-olney.png){fig-align=\"center\" fig-alt=\"A facet of barcodes showing location quotients from artists in the US by type and race.\"}\n\n--------------------------------------------------------------------------------\n\n<br>\n\n![My Contribution to the [SWDchallenge \"Small Multiples\"](https://www.storytellingwithdata.com/blog/2020/1/6/swdchallenge-small-multiples)](img/showcase/SWD_2020_01_SmallMultiples_grey.png){fig-align=\"center\" fig-alt=\"A facet of shots and goals of the Bundesliga football clubs in the season 2019/20.\"}\n\n--------------------------------------------------------------------------------\n\n![[\"European Energy Generation\"](github.com/jack-davison/tidytuesday) by Jack Davison](img/showcase/jack_davison.png){fig-align=\"center\" fig-alt=\"A gridded map of Europe showing horizontal stacked bars of energy production per country over time (each bar represents share among one year from 2016 to 2018).\"}\n\n--------------------------------------------------------------------------------\n\n![[Moon Charts as a Tile Grid Map](https://github.com/z3tt/grid-btw-wahlkreise-constituencies) showing the 2nd Vote Results from the German Election 2021](img/showcase/btw21_tile_grid_moon_second_de.png){fig-align=\"center\" fig-alt=\"A grid map using moon charts for all 297 electoral districts which show the share of the wnning party in second votesc during the German election in 2021.\"}\n\n--------------------------------------------------------------------------------\n\n![Our Winning Contribution to the [BES MoveMap Contest](https://besmovesig.wordpress.com/2021/02/25/mapping-movements-the-art-and-the-science-we-have-the-winners/)](img/showcase/20210131_BES_CheetahMap_rcarto.png){fig-align=\"center\" fig-alt=\"A spatial map of cheetah movement and their hotspot behaviour in Namibia.\"}\n\n--------------------------------------------------------------------------------\n\n![[Bivariate Choropleth x Hillshade Map](timogrossenbacher.ch/2019/04/bivariate-maps-with-ggplot2-and-sf) by Timo Gossenbacher](img/showcase/swiss_map.png){fig-align=\"center\" fig-alt=\"A spatial map of income and inequality shown with a bivariate color palette; alpine regions have a hillshading effect.\"}\n\n--------------------------------------------------------------------------------\n\n![Pixel Art by [Georgios Karamanis](https://karaman.is/)](img/showcase/bob-ross-pixel-art-georgios.png){fig-align=\"center\" fig-alt=\"A set of small multiples using pixelated encodings of certain elements in Bob Ross' paintings.\"}\n\n--------------------------------------------------------------------------------\n\n![Generative Art by [Thomas Lin Pedersen](https://www.data-imaginist.com/art)](img/showcase/genart.png){fig-align=\"center\" fig-alt=\"Two artworks by Thomas Pedersen, completely generated in R with ggplot2 (and pure magic).\"}\n\n\n# A Walk-Through Example\n\n\n## The Data Set\n\n<b style='font-size:2.3rem;'>Bike sharing counts in London, UK, powered by [TfL Open Data](https://tfl.gov.uk/modes/cycling/santander-cycles)</b>\n\n::: incremental\n-   covers the years 2015 and 2016\n-   incl. weather data acquired from [freemeteo.com](https://freemeteo.com)\n-   prepared by Hristo Mavrodiev for [Kaggle](https://www.kaggle.com/hmavrodiev/london-bike-sharing-dataset)\n-   further modification by myself\n:::\n\n\n## The Data Set\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(ggplot2)\n\nbikes <-\n  read_csv(\n    here::here(\"data\", \"london-bikes.csv\"),\n    col_types = \"Dcfffilllddddc\"\n  )\n```\n:::\n\n\n\n## The Data Set\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/view-data_fd02f8789a4976e2bdd6a737a3e86adf'}\n\n```{.r .cell-code}\nbikes\n```\n\n::: {.cell-output .cell-output-stdout}\n```{.hscroll}\n# A tibble: 1,454 × 14\n   date       day_night year  month season count is_workday is_weekend is_holiday  temp temp_feel humidity wind_speed weather_type    \n   <date>     <chr>     <fct> <fct> <fct>  <int> <lgl>      <lgl>      <lgl>      <dbl>     <dbl>    <dbl>      <dbl> <chr>           \n 1 2015-01-04 day       2015  1     3       6830 FALSE      TRUE       FALSE       2.17     -0.75     95.2      10.4  broken clouds   \n 2 2015-01-04 night     2015  1     3       2404 FALSE      TRUE       FALSE       2.79      2.04     93.4       4.58 clear           \n 3 2015-01-05 day       2015  1     3      14763 TRUE       FALSE      FALSE       8.96      7.71     81.1       8.67 broken clouds   \n 4 2015-01-05 night     2015  1     3       5609 TRUE       FALSE      FALSE       7.12      5.71     79.5       9.04 cloudy          \n 5 2015-01-06 day       2015  1     3      14501 TRUE       FALSE      FALSE       9         6.46     80.2      19.2  broken clouds   \n 6 2015-01-06 night     2015  1     3       6112 TRUE       FALSE      FALSE       6.71      4.21     77.6      12.8  clear           \n 7 2015-01-07 day       2015  1     3      16358 TRUE       FALSE      FALSE       8.17      5.08     75.2      21.2  scattered clouds\n 8 2015-01-07 night     2015  1     3       4706 TRUE       FALSE      FALSE       6.68      3.86     81.3      18.1  clear           \n 9 2015-01-08 day       2015  1     3       9971 TRUE       FALSE      FALSE       9.46      7.12     79.4      18.8  scattered clouds\n10 2015-01-08 night     2015  1     3       5630 TRUE       FALSE      FALSE      10.0       8.46     79.2      22.2  clear           \n# ℹ 1,444 more rows\n```\n:::\n:::\n\n\n\n\n## The Data Set\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/data-table_7dec021b1b2434e0e3b3567cec1a3584'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table lightable-minimal lightable-hover\" style=\"font-size: 20px; margin-left: auto; margin-right: auto; font-family: Spline Sans Mono; \">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Variable </th>\n   <th style=\"text-align:left;\"> Description </th>\n   <th style=\"text-align:left;\"> Class </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> date </td>\n   <td style=\"text-align:left;\"> Date encoded as `YYYY-MM-DD` </td>\n   <td style=\"text-align:left;\"> date </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> day_night </td>\n   <td style=\"text-align:left;\"> `day` (6:00am–5:59pm) or `night` (6:00pm–5:59am) </td>\n   <td style=\"text-align:left;\"> character </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> year </td>\n   <td style=\"text-align:left;\"> `2015` or `2016` </td>\n   <td style=\"text-align:left;\"> factor </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> month </td>\n   <td style=\"text-align:left;\"> `1` (January) to `12` (December) </td>\n   <td style=\"text-align:left;\"> factor </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> season </td>\n   <td style=\"text-align:left;\"> `0` (spring), `1` (summer), `2` (autumn), or `3` (winter) </td>\n   <td style=\"text-align:left;\"> factor </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> count </td>\n   <td style=\"text-align:left;\"> Sum of reported bikes rented </td>\n   <td style=\"text-align:left;\"> integer </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> is_workday </td>\n   <td style=\"text-align:left;\"> `TRUE` being Monday to Friday and no bank holiday </td>\n   <td style=\"text-align:left;\"> logical </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> is_weekend </td>\n   <td style=\"text-align:left;\"> `TRUE` being Saturday or Sunday </td>\n   <td style=\"text-align:left;\"> logical </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> is_holiday </td>\n   <td style=\"text-align:left;\"> `TRUE` being a bank holiday in the UK </td>\n   <td style=\"text-align:left;\"> logical </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> temp </td>\n   <td style=\"text-align:left;\"> Average air temperature (°C) </td>\n   <td style=\"text-align:left;\"> double </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> temp_feel </td>\n   <td style=\"text-align:left;\"> Average feels like temperature (°C) </td>\n   <td style=\"text-align:left;\"> double </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> humidity </td>\n   <td style=\"text-align:left;\"> Average air humidity (%) </td>\n   <td style=\"text-align:left;\"> double </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> wind_speed </td>\n   <td style=\"text-align:left;\"> Average wind speed (km/h) </td>\n   <td style=\"text-align:left;\"> double </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> weather_type </td>\n   <td style=\"text-align:left;\"> Most common weather type </td>\n   <td style=\"text-align:left;\"> character </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-full-1.png){width=2020}\n:::\n:::\n\n\n\n## A Default ggplot\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-0_8ca3a562838a6c66ef4cc3788e65da3c'}\n\n```{.r .cell-code}\n## scatter plot of plot bikes$count versus bikes$temp_feel\nggplot(data = bikes) +              ## initial call + data\n  aes(x = temp_feel, y = count) +   ## aesthetics\n  geom_point()                      ## geometric layer\n```\n:::\n\n\n\n## A Default ggplot\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-1_a8dedee8e1df2b34380e073864df9470'}\n\n```{.r .cell-code}\n## scatter plot of plot bikes$count versus bikes$temp_feel\nggplot(bikes, aes(x = temp_feel, y = count)) +\n  geom_point()\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-1_821e47e9f164c2b5047d5ed732c2e7ab'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-1-1.png){width=2020}\n:::\n:::\n\n\n\n## Combine Layers\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-2_3cb24c72fe5b8278f077cdc68b5d607b'}\n\n```{.r .cell-code  code-line-numbers=\"3,4\"}\nggplot(bikes, aes(x = temp_feel, y = count)) +\n  geom_point() + \n  ## add a GAM smoothing\n  stat_smooth() ## also: geom_smooth()\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-2_21dd23e00ab97a35e041eb5b2f2a0805'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-2-1.png){width=2020}\n:::\n:::\n\n\n\n## Mapping Aesthetics\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-3_5b6de59b7e5b25cc646ba799cd465401'}\n\n```{.r .cell-code  code-line-numbers=\"1\"}\nggplot(bikes, aes(x = temp_feel, y = count, color = day_night)) + \n  geom_point() + \n  stat_smooth()\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-3_4eb71ef8b82f4fb925fc0cf0f5f942a4'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-3-1.png){width=2020}\n:::\n:::\n\n\n\n##  Mapping Aesthetics\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-4_edf224bf9920b8589dbb6604b3eac4a3'}\n\n```{.r .cell-code  code-line-numbers=\"2,3|4,5\"}\nggplot(bikes, aes(x = temp_feel, y = count)) + \n  ## color mapping only applied to points\n  geom_point(aes(color = day_night)) + \n  ## invisible grouping to create two trend lines\n  stat_smooth(aes(group = day_night))\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-4_88070d061c24d0d59adf68a5a07cebf3'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-4-1.png){width=2020}\n:::\n:::\n\n\n\n## Setting Properties\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-5_74c429317e4738a2fd5aa6e2e506edf7'}\n\n```{.r .cell-code  code-line-numbers=\"2,4,5|7,9,10\"}\nggplot(bikes, aes(x = temp_feel, y = count)) + \n  geom_point(\n    aes(color = day_night), \n    ## setting larger points with 50% opacity\n    alpha = .5, size = 1.5\n  ) + \n  stat_smooth(\n    aes(group = day_night), \n    ## use linear fitting + draw black smoothing lines\n    method = \"lm\", color = \"black\"\n  )\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-5_86657d93e1c591004780e3c3b0b7b414'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-5-1.png){width=2020}\n:::\n:::\n\n\n\n## Split into Facets\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-6_334ff490697029090a0d9c38b0d2d67d'}\n\n```{.r .cell-code  code-line-numbers=\"9,10|10|6,7,8\"}\nggplot(bikes, aes(x = temp_feel, y = count)) + \n  geom_point(\n    aes(color = day_night), \n    alpha = .5, size = 1.5\n  ) + \n  stat_smooth(\n    method = \"lm\", color = \"black\"\n  ) +\n  ## small multiples\n  facet_wrap(facets = vars(day_night)) ## also: ~ day_night\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-6_2d4ccda864129f92837d259875c95851'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-6-1.png){width=2020}\n:::\n:::\n\n\n\n## Split into Facets\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-7_eb986dbc52e8f6ed73ad8b0b2561c59f'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11,12|3\"}\nggplot(bikes, aes(x = temp_feel, y = count)) + \n  geom_point(\n    aes(color = season), \n    alpha = .5, size = 1.5\n  ) + \n  stat_smooth(\n    method = \"lm\", color = \"black\"\n  ) +\n  ## small multiples\n  facet_grid(\n    rows = vars(day_night), cols = vars(year) ## also: day_night ~ year\n  )\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-7_4b90a1df49c0f3e9df8bbf9e1b8e12f4'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-7-1.png){width=2020}\n:::\n:::\n\n\n\n## Free Facets Axes\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-8_f25684086b496b811de31b3b40ee012d'}\n\n```{.r .cell-code  code-line-numbers=\"11,12|13,14\"}\nggplot(bikes, aes(x = temp_feel, y = count)) + \n  geom_point(\n    aes(color = season), \n    alpha = .5, size = 1.5\n  ) + \n  stat_smooth(\n    method = \"lm\", color = \"black\"\n  ) +\n  facet_grid(\n    day_night ~ year, \n    ## free y axis range\n    scales = \"free_y\", \n    ## scale heights proportionally\n    space = \"free_y\"\n  )\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-8_eb8cfdd7c0d415ceda9094c41da3b6ad'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-8-1.png){width=2020}\n:::\n:::\n\n\n\n## Store ggplot\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1\"}\ng1 <- \n  ggplot(bikes, aes(x = temp_feel, y = count)) + \n  geom_point(\n    aes(color = season), \n    alpha = .5, size = 1.5\n  ) + \n  stat_smooth(\n    method = \"lm\", color = \"black\"\n  ) +\n  facet_grid(\n    day_night ~ year, \n    scales = \"free_y\", \n    space = \"free_y\"\n  )\n```\n:::\n\n\n\n## Change the Axis Scaling\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-9a_025ddc4a8864e1179dcac191a9473f2e'}\n\n```{.r .cell-code  code-line-numbers=\"1|2,3,8|4,5|6,7\"}\ng1 +\n  ## x axis\n  scale_x_continuous(\n    ## add °C symbol\n    labels = function(x) paste0(x, \"°C\"), \n    ## use 5°C spacing\n    breaks = -1:6*5  ## also: seq(-5, 30, by = 5)\n  )\n```\n:::\n\n\n\n## Change the Axis Scaling\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"9,10,16|12,13|14,15|1\"}\ng2 <- g1 +\n  ## x axis\n  scale_x_continuous(\n    ## add °C symbol\n    labels = function(x) paste0(x, \"°C\"), \n    ## use 5°C spacing\n    breaks = -1:6*5  ## also: seq(-5, 30, by = 5)\n  ) +\n  ## y axis\n  scale_y_continuous(\n    ## add a thousand separator\n    labels = scales::label_comma(), \n    ## use consistent spacing across rows\n    breaks = 0:5*10000\n  )\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-9_0773d65a0dec18828be016e8a331f268'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-9-1.png){width=2020}\n:::\n:::\n\n\n\n## Use a Custom Color Palette\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-10a_d8e8dc8efde5459e91a4c86ea2ba8e72'}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4,5\"}\ng2 +\n  ## use a custom color palette for season colors\n  scale_color_manual(\n    values = c(\"#6681FE\", \"#1EC98D\", \"#F7B01B\", \"#A26E7C\")\n  )\n```\n:::\n\n\n\n## Use a Custom Color Palette\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6,7|10,11,12\"}\n## use a named vector for explicit matching\ncolors <- c(\n  `0` = \"#1EC98D\",\n  `1` = \"#F7B01B\",\n  `2` = \"#A26E7C\",\n  `3` = \"#6681FE\"\n)\n\ng2 +\n  scale_color_manual(\n    values = colors\n  )\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-10_27d98f0fa347993503841f66d12cfd59'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-10-1.png){width=2020}\n:::\n:::\n\n\n\n## Adjust Labels and Titles\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-11_48579037fb9a744828f81d1ab7903559'}\n\n```{.r .cell-code  code-line-numbers=\"2,5\"}\ng2 +\n  ## overwrite legend keys\n  scale_color_manual(\n    values = colors,\n    labels = c(\"Winter\", \"Spring\", \"Summer\", \"Autumn\")\n  )\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-11_467168fb6d3bb50e8350146d4337e3cc'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-11-1.png){width=2020}\n:::\n:::\n\n\n\n## Adjust Labels and Titles\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"6,12|7,8|9,10,11\"}\ng3 <- g2 +\n  scale_color_manual(\n    values = colors,\n    labels = c(\"Winter\", \"Spring\", \"Summer\", \"Autumn\")\n  ) +\n  labs(\n    ## overwrite axis and legend titles\n    x = \"Average feels-like temperature\", y = NULL, color = NULL,\n    ## add plot title and caption\n    title = \"Trends of Reported Bike Rents versus Feels-Like Temperature in London\",\n    caption = \"Data: TfL (Transport for London), Jan 2015–Dec 2016\"\n  )\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-12_83f83c5977f758f6a83e8c284362b554'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-12-1.png){width=2020}\n:::\n:::\n\n\n\n## Apply a Complete Theme\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-13_b07daaa9244009992840d274f4a1c7b9'}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4,5\"}\ng3 +\n  ## add theme with a custom font + larger element sizes\n  theme_light(\n    base_size = 15, base_family = \"Spline Sans\"\n  )\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-13_f71d8209f5cfd7f067d6bb2919b971b2'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-13-1.png){width=2020}\n:::\n:::\n\n\n\n## Apply a Complete Theme\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3,4,20|5,6,7|8,9,10,11,12,13,14|15,16|17,18|19\"}\ng4 <- g3 +\n  theme_light(base_size = 15, base_family = \"Spline Sans\") +\n  ## theme adjustments\n  theme(\n    plot.title.position = \"plot\", ## left-align title \n    plot.caption.position = \"plot\", ## right-align caption\n    legend.position = \"top\", ## place legend above plot\n    plot.title = element_text(face = \"bold\", size = rel(1.4)), ## larger, bold title\n    axis.text = element_text(family = \"Spline Sans Mono\"), ## monospaced font for axes\n    axis.title.x = element_text( ## left-aligned, grey x axis label\n      hjust = 0, color = \"grey20\", margin = margin(t = 12)\n    ),\n    legend.text = element_text(size = rel(1)), ## larger legend labels\n    strip.text = element_text(face = \"bold\", size = rel(1.15)), ## larger, bold facet labels\n    panel.grid.major.x = element_blank(), ## no vertical major lines\n    panel.grid.minor = element_blank(), ## no minor grid lines\n    panel.spacing.x = unit(20, \"pt\"), ## increase white space between panels\n    panel.spacing.y = unit(10, \"pt\"), ## increase white space between panels\n    plot.margin = margin(rep(15, 4)) ## adjust white space around plot\n  )\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-14_808bc34299d5fd92a566b0b9fd50bb61'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-14-1.png){width=2020}\n:::\n:::\n\n\n\n## Adjust Legend\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-15_c86d80812a99b4f0ed6c6673ee60c663'}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4,5|4\"}\ng4 +\n  ## adjust symbol size in legend\n  guides(\n    color = guide_legend(override.aes = list(size = 4))\n  )\n```\n:::\n\n\n\n## Adjust Legend\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-15b_0908f61bde3df4d765e881d4b0bb5873'}\n\n```{.r .cell-code  code-line-numbers=\"2,5,6,7|5,6\"}\ng4 +\n  scale_color_manual(\n    values = colors,\n    labels = c(\"Winter\", \"Spring\", \"Summer\", \"Autumn\"),\n    ## adjust symbol size in legend size\n    guide = guide_legend(override.aes = list(size = 4))\n  )\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-15_21d203282f0f612eb695324c8c51785e'}\n::: {.cell-output-display}\n![](01_ggplot_introduction_files/figure-revealjs/walkthrough-15-1.png){width=2020}\n:::\n:::\n\n\n\n--------------------------------------------------------------------------------\n\n## Full Code\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/walkthrough-full_80891eeccc8d68fba0cde7c31437cec1'}\n\n```{.r .cell-code}\n## create named color vector\ncolors <- c(\n  `0` = \"#1EC98D\",\n  `1` = \"#F7B01B\",\n  `2` = \"#A26E7C\",\n  `3` = \"#6681FE\"\n)\n\n## scatter plot of plot bikes$count versus bikes$temp_feel\nggplot(bikes, aes(x = temp_feel, y = count)) + \n  ## add points\n  geom_point(\n    ## color mapping only applied to points\n    aes(color = season), \n    ## setting larger points with 50% opacity\n    alpha = .5, size = 1.5\n  ) + \n  ## add a smoothing\n  stat_smooth(  ## also: geom_smooth()\n    ## use linear fitting + draw black smoothing lines\n    method = \"lm\", color = \"black\"\n  ) +\n  ## small multiples\n  facet_grid(\n    day_night ~ year,  ## also: vars(day_night), vars(year)\n    ## free y axis range\n    scales = \"free_y\", \n    ## scale heights proportionally \n    space = \"free_y\"\n  ) +\n  ## x axis\n  scale_x_continuous(\n    ## add °C symbol\n    labels = function(x) paste0(x, \"°C\"), \n    ## use 5°C spacing\n    breaks = -1:6*5  ## also: seq(-5, 30, by = 5)\n  ) +\n  ## y axis\n  scale_y_continuous(\n    ## add a thousand separator\n    labels = scales::label_comma(), \n    ## use consistent spacing across rows\n    breaks = 0:5*10000\n  ) +\n  ## colors\n  scale_color_manual(\n    ## use a custom color palette\n    values = colors,\n    ## and overwrite legend keys\n    labels = c(\"Winter\", \"Spring\", \"Summer\", \"Autumn\"),\n    ## adjust symbol size in legend size\n    guide = guide_legend(override.aes = list(size = 4))\n  ) +\n  labs(\n    ## overwrite axis and legend titles\n    x = \"Average feels-like temperature\", y = NULL, color = NULL,\n    ## add plot title and caption\n    title = \"Trends of Reported Bike Rents versus Feels-Like Temperature in London\",\n    caption = \"Data: TfL (Transport for London), Jan 2015–Dec 2016\"\n  ) +\n  ## add theme with a custom font + larger element sizes\n  theme_light(\n    base_size = 15, base_family = \"Spline Sans\"\n  ) +\n  ## theme adjustments\n  theme(\n    plot.title.position = \"plot\", ## left-align title \n    plot.caption.position = \"plot\", ## right-align caption\n    legend.position = \"top\", ## place legend above plot\n    plot.title = element_text(face = \"bold\", size = rel(1.4)), ## larger, bold title\n    axis.text = element_text(family = \"Spline Sans Mono\"), ## monospaced font for axes\n    axis.title.x = element_text( ## left-aligned, grey x axis label\n      hjust = 0, color = \"grey20\", margin = margin(t = 12)\n    ),\n    legend.text = element_text(size = rel(1)), ## larger legend labels\n    strip.text = element_text(face = \"bold\", size = rel(1.15)), ## larger, bold facet labels\n    panel.grid.major.x = element_blank(), ## no vertical major lines\n    panel.grid.minor = element_blank(), ## no minor grid lines\n    panel.spacing.x = unit(20, \"pt\"), ## increase white space between panels\n    panel.spacing.y = unit(10, \"pt\"), ## increase white space between panels\n    plot.margin = margin(rep(15, 4)) ## adjust white space around plot\n  )\n```\n:::\n\n\n\n# Saving Plots\n\n\n## Save the Graphic\n\n<br>\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save_587975367f3f477e43f97acfcc80d0f3'}\n\n```{.r .cell-code}\nggsave(filename = \"my_plot.png\", plot = g)\n```\n:::\n\n\n::: fragment\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-implicit_0e5c9ac22ba361f9a8a8f2837701b934'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\")\n```\n:::\n\n:::\n\n<br>\n\n::: fragment\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-aspect_b195e1e3e3dce8745879d243181b7de0'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\", width = 6, height = 5, dpi = 600)\n```\n:::\n\n:::\n\n\n## Plot Resolution\n\n\n\n\n\n::: {layout-ncol=\"2\"}\n![](plots/resolution-dpi-100.png)\n\n![](plots/resolution-dpi-600.png)\n:::\n\n\n## Plot Resolution\n\n::: {layout-ncol=\"2\"}\n![](img/fundamentals/resolution-dpi-100-zoom.png)\n\n![](img/fundamentals/resolution-dpi-600-zoom.png)\n:::\n\n\n## Save the Graphic\n\n<br>\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save_587975367f3f477e43f97acfcc80d0f3'}\n\n```{.r .cell-code}\nggsave(filename = \"my_plot.png\", plot = g)\n```\n:::\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-implicit_0e5c9ac22ba361f9a8a8f2837701b934'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\")\n```\n:::\n\n\n<br>\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-aspect_b195e1e3e3dce8745879d243181b7de0'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\", width = 6, height = 5, dpi = 600)\n```\n:::\n\n\n::: fragment\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-unit_36d2f3695d4b50079c8c2b21a9efdcc3'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\", width = 6*2.54, height = 5*2.54, unit = \"cm\", dpi = 600)\n```\n:::\n\n:::\n\n<br>\n\n::: fragment\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-raster-agg_5bfc7f67416831440296ed4f891acd66'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\", device = agg_png)\n```\n:::\n\n:::\n\n::: fragment\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-cairo_c3afbcb63ed72e1d8f33b28deee976db'}\n\n```{.r .cell-code}\nggsave(\"my_plot.pdf\", device = cairo_pdf)\n```\n:::\n\n:::\n\n\n--------------------------------------------------------------------------------\n\n<br>\n\n![Modified from canva.com](img/fundamentals/vector-raster-canva.png){fig-alt=\"A comparison of vector and raster graphics.\" fig-width=\"150%\"}\n\n\n\n## The {ragg} Package\n\n<span class='simple-highlight-grn' style='font-size:2.1rem;'>provides drop-in replacements for the default raster graphic devices</span>\n\n::: incremental\n\n* faster\n* direct access to all system fonts\n* advanced text rendering\n  * including support for right-to-left text, emojis, and font fallback\n* high quality anti-aliasing\n* high quality rotated text\n* supports 16-bit output\n* system independent rendering\n\n:::\n\n\n## The {ragg} Package\n\n<br>\n\n![Source: [tidyverse.org/blog/2021/02/modern-text-features](https://www.tidyverse.org/blog/2021/02/modern-text-features/)](img/fundamentals/ragg-left-and-right.png){fig-align=\"center\" fig-alt=\"A comparison of different graphic devices in R comparing the rendering of right-to-left text (and mixing left-to-right and right-to-left text).\"}\n\n\n## The {ragg} Package\n\n<br>\n\n![Source: [tidyverse.org/blog/2021/02/modern-text-features](https://www.tidyverse.org/blog/2021/02/modern-text-features/)](img/fundamentals/ragg-ligatures.png){fig-align=\"center\" fig-alt=\"A comparison of different graphic devices in R comparing the rendering of font ligatures.\"}\n\n\n## The {ragg} Package\n\n<br>\n\n![Source: [tidyverse.org/blog/2021/02/modern-text-features](https://www.tidyverse.org/blog/2021/02/modern-text-features/)](img/fundamentals/ragg-emojis.png){fig-align=\"center\" fig-alt=\"A comparison of different graphic devices in R comparing the rendering of emojis.\"}\n\n\n## The {ragg} Package\n\n<br>\n\n![Source: [tidyverse.org/blog/2021/02/modern-text-features](https://www.tidyverse.org/blog/2021/02/modern-text-features/)](img/fundamentals/ragg-fallback.png){fig-align=\"center\" fig-alt=\"A comparison of different graphic devices in R comparing the rendering missing glyphs, partly making use of fallback fonts.\"}\n\n\n## The {ragg} Package\n\n::: incremental\n* use {ragg} when saving ggplots by passing agg device function: `ggsave(device = agg_png))` ([used by default if installed](https://github.com/tidyverse/ggplot2/pull/4388))\n* use {ragg} in the *Rstudio Plots* pane be setting the backend to AGG: ![](img/fundamentals/ragg-rstudio.png){fig-alt=\"How to set the AGG device as the default in RStudio via Global Options > > General > Graphics > Backend.\"}\n* use {ragg} when knitting Rmarkdown files by setting `dev=\"ragg_png\"` in the code chunk options.\n\n:::\n\n\n## Save the Graphic\n\n<br>\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save_587975367f3f477e43f97acfcc80d0f3'}\n\n```{.r .cell-code}\nggsave(filename = \"my_plot.png\", plot = g)\n```\n:::\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-implicit_0e5c9ac22ba361f9a8a8f2837701b934'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\")\n```\n:::\n\n\n<br>\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-aspect_b195e1e3e3dce8745879d243181b7de0'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\", width = 6, height = 5, dpi = 600)\n```\n:::\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-unit_36d2f3695d4b50079c8c2b21a9efdcc3'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\", width = 6*2.54, height = 5*2.54, unit = \"cm\", dpi = 600)\n```\n:::\n\n<br>\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-raster-agg_5bfc7f67416831440296ed4f891acd66'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\", device = agg_png)\n```\n:::\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-cairo_c3afbcb63ed72e1d8f33b28deee976db'}\n\n```{.r .cell-code}\nggsave(\"my_plot.pdf\", device = cairo_pdf)\n```\n:::\n\n\n::: fragment\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/ggplot-save-svg_093a9f360bcaba067d978d2d6720d0a9'}\n\n```{.r .cell-code}\nggsave(\"my_plot.svg\")\n```\n:::\n\n:::\n\n\n--------------------------------------------------------------------------------\n\n![](img/fundamentals/figma-svg.png){fig-align=\"center\"}\n\n\n## How to Work with Aspect Ratios\n\n::: incremental\n-   don't rely on the Rstudio viewer pane!\n-   once you have a *\"it's getting close\"* prototype, settle on a plot size<br><br>\n-   **Approach 1:** save the file and inspect it—go back to your IDE—repeat\n    -   tedious and time-consuming...<br><br>\n-   **Approach 2:** use a qmd or rmd with inline output and chunk settings\n    -   set `fig-width` / `fig.width` and `fig-height` / `fig.height`<br>per chunk or globally<br><br>\n:::\n\n\n## Setting Plot Sizes in Quarto and Rmarkdown\n\n![](img/fundamentals/plot-size-chunk-yaml.png){fig-alt=\"A screenshot of an exemplary Qmd file with two chunks with different settings of fig-width and fig-height as YAML-styled options using the hashpipe. Unfortunately, these are not respected when the chunk output is printed inline.\" fig-width=\"60%\"}\n\n\n## Setting Plot Sizes in Quarto and Rmarkdown\n\n![](img/fundamentals/plot-size-chunk-inline.png){fig-alt=\"A screenshot of an exemplary Qmd file with two chunks with different settings of fig.width and fig.height set as inline chunk options.\" fig-width=\"60%\"}\n\n\n## How to Work with Aspect Ratios\n\n-   don't rely on the Rstudio viewer pane!\n-   once you have a *\"it's getting close\"* prototype, settle on a plot size<br><br>\n-   **Approach 1:** save the file and inspect it—go back to your IDE—repeat\n    -   tedious and time-consuming...<br><br>\n-   **Approach 2:** use a qmd or rmd with inline output and chunk settings\n    -   set `fig-width` / `fig.width` and `fig-height` / `fig.height`<br>per chunk or globally<br><br>\n-   **Approach 3:** use our [{camcorder} package](https://github.com/thebioengineer/camcorder)\n    -   saves output from all `ggplot()` calls and displays it in the viewer pane\n\n\n## Setting Plot Sizes via {camcorder}\n\n<br>\n\n![](img/fundamentals/plot-size-camcorder-a.png){fig-alt=\"A screenshot of an exemplary R script with a plot automatically saved and isplayed in correct aspect ratio thanks to the camcorder package.\" fig-width=\"120%\"}\n\n\n## Setting Plot Sizes via {camcorder}\n\n<br>\n\n![](img/fundamentals/plot-size-camcorder-b.png){fig-alt=\"A screenshot of an exemplary R script with a plot automatically saved and isplayed in correct aspect ratio thanks to the camcorder package.\" fig-width=\"120%\"}\n\n\n## Setting Plot Sizes via {camcorder}\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/camcorder-record_7a897ce36bd984905bd834742096798b'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6,7|9,10,11,12,13,15\"}\ncamcorder::gg_record(\n  dir = here::here(\"temp\"),  ## path for plot files\n  device = \"png\",            ## device to use\n  width = 10,                ## figure width\n  height = 5,                ## figure height\n  dpi = 600                  ## plot resolution\n)\n\ng <- ggplot(bikes, aes(x = temp, y = count, color = day_night)) +\n  geom_point(alpha = .3, size = 2) +\n  scale_color_manual(values = c(day = \"#FFA200\", night = \"#757BC7\")) +\n  theme_minimal(base_size = 18, base_family = \"Asap SemiCondensed\") +\n  theme(panel.grid.minor = element_blank())\n\ng\n```\n:::\n\n\n\n## Setting Plot Sizes via {camcorder}\n\n\n::: {.cell hash='01_ggplot_introduction_cache/revealjs/camcorder-resize_c783ba02d199ca52d0983c0f32787920'}\n\n```{.r .cell-code  code-line-numbers=\"17,19\"}\ncamcorder::gg_record(\n  dir = here::here(\"temp\"),  ## path for plot files\n  device = \"png\",            ## device to use\n  width = 10,                ## figure width\n  height = 5,                ## figure height\n  dpi = 600                  ## plot resolution\n)\n\ng <- ggplot(bikes, aes(x = temp, y = count, color = day_night)) +\n  geom_point(alpha = .3, size = 2) +\n  scale_color_manual(values = c(day = \"#FFA200\", night = \"#757BC7\")) +\n  theme_minimal(base_size = 18, base_family = \"Asap SemiCondensed\") +\n  theme(panel.grid.minor = element_blank())\n\ng\n\ncamcorder::gg_resize_film(width = 20) ## update figure width\n\ng\n```\n:::\n\n\n\n\n## Your Turn\n\n::: question\n-   **Explore the TfL bike share data visually:**\n    -  Create a *time series* of counts per day and night.\n    -  Draw *box and whisker plots* of average temperatures per season.\n    -  Visualize bike counts per weather type and period as *bar chart*.\n-   **Polish the charts and export them in a format of your choice.**\n:::\n\n\n## Your Turn\n\n::: question\n-   **Explore the TfL bike share data visually:**\n    -  Create a *time series* of counts per day and night.\n    -  Draw *box and whisker plots* of average temperatures per season.\n    -  Visualize bike counts per weather type and period as *bar chart*.\n-   **Polish the charts and export them in a format of your choice.**\n-   **Discuss / investigate with your neighbor:**\n    -  What are the differences between `geom_line()` and `geom_path()`?\n    -  Why can you use `geom_smooth()` and `stat_smooth()` interchangeably?\n    -  What are the three ways to *remove a legend* from a ggplot?\n    -  Which is your favorite theme? \n    -  What is your favorite ggplot2 extension package?\n:::\n\n##  {background-image=\"img/exercises/exercise-what-now.png\" background-position=\"center\" background-size=\"75%\"}\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}